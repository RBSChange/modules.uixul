<?xml version="1.0"?>
<bindings
	xmlns="http://www.mozilla.org/xbl"
	xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

<!--
################################################################################
## wSubmitButton                                                              ##
################################################################################
-->

	<binding
		id="wValidateButton"
		extends="form.wButton#wButton"
		doc-text="wSubmitButton provides an easy way to get a button that validates the field in which it is placed.">

		<implementation>

			<constructor><![CDATA[
				this.setAttribute('validates', 'true');
				if (!this.hasAttribute('field'))
				{
					throw new Error("[wValidateButton]: missing 'field' attribute to specify the attached field.");
				}
				var handler =
				{
					form : this.form,
					field: this.getAttribute('field'),
					handleEvent : function()
					{
						try {
							var f = this.form.fields[this.field];
							f.setAttribute('validate-notimeout', 'true');
							f.validate();
							f.removeAttribute('validate-notimeout');
						} 
						catch (e) 
						{
							wCore.error("wValidateButton.constructor", [], e);
						}
					}
				}
				this.input_field.addEventListener('command', handler, false);
			]]></constructor>


			<property name="value">
				<getter><![CDATA[
					return null;
				]]></getter>
				<setter>
				</setter>
			</property>

		</implementation>

	</binding>

</bindings>