<?xml version="1.0"?>
<bindings
	xmlns="http://www.mozilla.org/xbl"
	xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

<!--
################################################################################
## wFormToolbar                                                               ##
################################################################################
-->

	<binding id="wFormToolbar" extends="core.wBox#wBox">

	   <implementation>

			<property name="resetButton" onget="return this.getElementById('resetButton')" />
			<property name="createButton" onget="return this.getElementById('createButton')" />
			<property name="createFromButton" onget="return this.getElementById('createFromButton')" />
			<property name="submitButton" onget="return this.getElementById('submitButton')" />
			<property name="submitAndCloseButton" onget="return this.getElementById('submitButtonAndClose')" />

			<constructor><![CDATA[
				if (this.hasAttribute("hidesubmit") && (this.getAttribute("hidesubmit") == "true"))
				{
				    this.submitButton.setAttribute('collapsed', 'true');
				    this.submitAndCloseButton.setAttribute('collapsed', 'true');
				}
				if (this.hasAttribute("hidereset") && (this.getAttribute("hidereset") == "true"))
				{
				    this.resetButton.setAttribute('collapsed', 'true');
				}
				if (this.hasAttribute("hidecreate") && (this.getAttribute("hidecreate") == "true"))
				{
				    this.createButton.setAttribute('collapsed', 'true');
				}
				
				// CreateFromButton is hidden by default. 
				// It must be displayed in the form implementation.
				this.hideCreateFromButton();
			]]></constructor>

			<method name="hideButton">
				<parameter name="button" />
				<body><![CDATA[
					this.getElementById(button).setAttribute('hidden', 'true');
				]]></body>
			</method>

			<method name="hideSubmitButton">
				<body><![CDATA[
					this.getElementById('submitButton').setAttribute('hidden', 'true');
				]]></body>
			</method>

			<method name="hideSubmitAndCloseButton">
				<body><![CDATA[
					this.getElementById('submitButtonAndClose').setAttribute('hidden', 'true');
				]]></body>
			</method>

			<method name="hideResetButton">
				<body><![CDATA[
					this.getElementById('resetButton').setAttribute('hidden', 'true');
				]]></body>
			</method>

			<method name="hideCreateButton">
				<body><![CDATA[
					this.getElementById('createButton').setAttribute('hidden', 'true');
				]]></body>
			</method>

			<method name="hideCreateFromButton">
				<body><![CDATA[
					this.getElementById('createFromButton').setAttribute('hidden', 'true');
				]]></body>
			</method>
			
			<method name="displayCreateFromButton">
				<body><![CDATA[
					this.getElementById('createFromButton').setAttribute('hidden', 'false');
				]]></body>
			</method>
			
		</implementation>

		<xbl:content
			xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
			xmlns:xbl="http://www.mozilla.org/xbl">

			<toolbox flex="1" class="change-toolbox">
				<toolbar flex="1" class="change-toolbar">
					<wtoolbarsubmitbutton anonid="submitButtonAndClose" label="&amp;modules.uixul.bo.general.buttons.Save-and-close;" image="{IconsBase}/small/shadow/disk_blue.png" close-after-save="true" tooltiptext="&amp;modules.uixul.bo.general.buttons.Save-and-close-help;" />
					<toolbarseparator />
					<wtoolbarsubmitbutton anonid="submitButton" label="&amp;modules.uixul.bo.general.buttons.Save;" image="{IconsBase}/small/shadow/disk_blue_window.png" tooltiptext="&amp;modules.uixul.bo.general.buttons.Save-help;" />
					<wtoolbarresetbutton anonid="resetButton" label="&amp;modules.uixul.bo.general.buttons.Reset;" image="{IconsBase}/small/shadow/selection.png" tooltiptext="&amp;modules.uixul.bo.general.buttons.Reset-help;" />
					<wtoolbarcreatenewbutton anonid="createButton" label="&amp;modules.uixul.bo.general.buttons.Createnew;" image="{IconsBase}/small/shadow/add.png" tooltiptext="&amp;modules.uixul.bo.general.buttons.Createnew-help;" />
					<wtoolbarcreatenewfrombutton anonid="createFromButton" label="&amp;modules.uixul.bo.general.buttons.Createnew-from;" image="{IconsBase}/small/shadow/copy.png" tooltiptext="&amp;modules.uixul.bo.general.buttons.Createnew-from-help;" />
					<toolbarseparator />
					<xbl:children includes="toolbarbutton" />
					<spacer flex="1" />
				</toolbar>
			</toolbox>

		</xbl:content>

	</binding>

</bindings>