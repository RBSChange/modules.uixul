<bindings   xmlns="http://www.mozilla.org/xbl"
            xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
            xmlns:xbl="http://www.mozilla.org/xbl"
            xmlns:html="http://www.w3.org/1999/xhtml">

    <binding id="wEmptyToolbar" extends="layout.wBlockToolbar#wBaseBlockToolbar">

        <implementation>

            <method name="onInitialize">
                <body><![CDATA[
                    try
                    {
                        this.onUpdate();
                    }
                    catch (e)
                    {
                        wCore.error("wEmptyToolbar.onInitialize", [], e);
                    }
                ]]></body>
            </method>

            <method name="onUpdate">
                <body><![CDATA[
                    try
                    {
                        var display = this.blockHandler.block.getDisplay();
                        var height = '';
                        if (display && display.height)
                        {
                            var height = display.height;
                        }
                        if (document.getElementById("height"))
                        {
                            document.getElementById("height").value = this.getPixelValueAsInt(height);
                        }
                    }
                    catch (e)
                    {
                        wCore.error("wEmptyToolbar.onUpdate", [], e);
                    }
                ]]></body>
            </method>

            <method name="applyHeight">
                <parameter name="height"/>
                <body><![CDATA[
                    try
                    {
                        height = parseInt(height) + "px";
                        this.setBlockAttribute('display', 'height', height);
                        this.blockHandler.style.height = height;
                        this.blockHandler.setAttribute("height", height);
                    }
                    catch (e)
                    {
                        wCore.error("wEmptyToolbar.applyHeight", [height], e);
                    }
                ]]></body>
            </method>
            
            <method name="getPixelValueAsInt">
				<parameter name="value" />
				<body><![CDATA[
					var lastIndex = value.lastIndexOf("px");
					if (typeof value == 'string' && lastIndex > 0)
					{
						return parseInt(value.substring(0, lastIndex));
					}
					return value;
				]]></body>
			</method>

        </implementation>

        <xbl:content xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:xbl="http://www.mozilla.org/xbl" xmlns:html="http://www.w3.org/1999/xhtml" orient="vertical">
            <toolbar anonid="toolbar" flex="1" class="change-toolbar">
                <toolbaritem align="center">
                    <textbox id="height" anonid="heightTextbox" size="10" onchange="applyHeight(this.value);" tooltiptext="&amp;modules.uixul.bo.layout.BlockHeight-help;" />
                </toolbaritem>
            </toolbar>
        </xbl:content>
    </binding>
</bindings>