<?xml version="1.0" encoding="UTF-8"?>
<bindings xmlns="http://www.mozilla.org/xbl" xmlns:xbl="http://www.mozilla.org/xbl">
	<binding id="cLayoutToolbar" extends="core.wCore#wCore">
		<implementation>
			<field name="columnCount">0</field>
			<field name="cLayoutInstance">0</field>
			<method name="initialize">
				<parameter name="cLayoutInstance" />
				<body><![CDATA[
					this.columnCount = cLayoutInstance._columnCount;
					this.cLayoutInstance = cLayoutInstance;
					var mainToolbar = this.getElementById("mainToolbar");
					if (cLayoutInstance._columnCount == 1)
					{
						return;
					}
					for (var i = 0 ; i < cLayoutInstance._columnCount ; i++)
					{
						textbox = this.getElementById('widthTextbox_' +i);
						label = this.getElementById('labelTextbox_' +i);
						if (textbox != undefined && label != undefined)
						{
							textbox.removeAttribute("hidden");
							label.removeAttribute("hidden");
							textbox.setAttribute("class", 'col-width');
							textbox.setAttribute('value', cLayoutInstance.getLayoutElement(i).getAttribute("widthPercentage"));
						}
					}
				]]>
				</body>
			</method>
			<method name="resizeLayoutElement">
				<parameter name="index" />
				<body><![CDATA[
					if (this.columnCount == 2)
					{
						nextIndex = (index+1)%2;
						nextTextbox = this.getElementById('widthTextbox_' +nextIndex);
						currentTextbox = this.getElementById('widthTextbox_' +index);
						var newValue = Math.min(Math.max(10, currentTextbox.value), 90);
						currentTextbox.value = newValue;
						nextTextbox.value = 100.0 - newValue;
						this.cLayoutInstance.resizeColumn(index, newValue/100.0);
					}
					this.cLayoutInstance.layoutEditor.setIsModified(true);
				]]></body>
			</method>
		</implementation>
		<xbl:content xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
			<toolbar anonid="mainToolbar" flex="1" class="change-toolbar">
				<vbox flex="1" pack="center">
					<label anonid="labelTextbox_0" hidden="true">col. 1</label>
				</vbox>
				<textbox anonid="widthTextbox_0" size="4" maxlength="3" hidden="true" onchange="resizeLayoutElement(0);"
					tooltiptext="&amp;modules.uixul.bo.layout.ColWidthWidth-help;" />
				<vbox flex="1" pack="center">
					<label anonid="labelTextbox_1" hidden="true">col. 2</label>
				</vbox>
				<textbox anonid="widthTextbox_1" size="4" maxlength="3" hidden="true" onchange="resizeLayoutElement(1);"
					tooltiptext="&amp;modules.uixul.bo.layout.ColWidthWidth-help;" />
				<label anonid="labelTextbox_2" hidden="true">col. 3</label>
				<textbox anonid="widthTextbox_2" size="4" maxlength="3" hidden="true" onchange="resizeLayoutElement(2);"
					tooltiptext="&amp;modules.uixul.bo.layout.ColWidthWidth-help;" />
			</toolbar>
		</xbl:content>
	</binding>
</bindings>