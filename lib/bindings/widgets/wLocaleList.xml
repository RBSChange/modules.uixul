<?xml version="1.0" encoding="utf-8"?>
<bindings xmlns="http://www.mozilla.org/xbl" xmlns:xul="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:xbl="http://www.mozilla.org/xbl">
<!--
wLocaleList
	@author INTcourS

	Specific non hierarchical (by default) list view for LOCALES.
-->
	<binding id="wLocaleList" inheritstyle="true" extends="widgets.wList#wList">

		<implementation>

			<constructor><![CDATA[
			    this.setAttribute("hidecolumnpicker", "true");
                this.getElementById("pub-column").setAttribute("hidden", "true");
                this.setWorkingLanguage(this.getModule().i18n_defaultLang);
			]]></constructor>

            <method name="__setupActions">
                <body><![CDATA[
                this._availableActions["editlocale_entity"] = {
                    select : [ "edit", "duplicate", "delete", "copykey", "copyvalue" ],
                    contextmenu : [ "edit", "duplicate", "delete", "copykey", "copyvalue" ],
                };

                this.setWorkingLanguage(this.getModule().i18n_defaultLang);
                ]]></body>
            </method>

            <method name="__setupColumns">
                <body><![CDATA[
                this._availableColumns['default'] = [
                    {ref: "label", flex: "1", properties: "type overridden useredited", label: "&amp;modules.uixul.bo.editlocale.Key;"},
                    {ref: "value", flex: "1", label: "&amp;modules.uixul.bo.editlocale.Default-lang-value;"}
                 ];
                this.setWorkingLanguage(this.getModule().i18n_defaultLang);
                ]]></body>
            </method>

            <method name="__setupDatasource">
                <body><![CDATA[
                this._dataSource = { parser: "localeentity", source: moduleName, order: "label/asc" };
                this.setWorkingLanguage(this.getModule().i18n_defaultLang);
                ]]></body>
            </method>

            <method name="checkSecurity">
				<parameter name="actionName" />
				<parameter name="document" />
				<body><![CDATA[
					return true;
				]]></body>
			</method>

        </implementation>


		<xbl:content
			xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
			xmlns:xbl="http://www.mozilla.org/xbl">

			<vbox flex="1" xbl:inherits="flex">

			    <toolbox anonid="top-toolbox" orient="horizontal" class="change-toolbox-light">

			        <!-- full tree navigation entries :  -->

					<toolbar anonid="navigationtb" flex="1" collapsed="true" class="change-toolbar">
					    <spacer anonid="navigationspacer" flex="1" />
						<toolbarbutton anonid="navigationbegin" image="{IconsBase}/small/shadow/navigate_beginning.png" disabled="true" tooltiptext="&amp;modules.uixul.bo.general.Navigate-begin;" oncommand="navigateBegin()" />
						<toolbarbutton anonid="navigationback2" image="{IconsBase}/small/shadow/navigate_left2.png" disabled="true" tooltiptext="&amp;modules.uixul.bo.general.Navigate-back-quick;" oncommand="navigateBack(true)" />
						<toolbarbutton anonid="navigationback" image="{IconsBase}/small/shadow/navigate_left.png" disabled="true" tooltiptext="&amp;modules.uixul.bo.general.Navigate-back;" oncommand="navigateBack()" />
						<hbox align="center">
						    <label anonid="navigationpagelabel" value="&amp;modules.uixul.bo.general.Page;" />
						    <menulist anonid="navigationindex" sizetopopup="none" editable="true" width="50" oncommand="navigateSelect()" oninput="navigateInput()" height="22" >
                              <menupopup />
                            </menulist>
						    <label anonid="navigationpageseparator" value="&amp;modules.uixul.bo.general.out-of;" />
						    <label anonid="navigationtotal" value="0" />
						</hbox>
						<toolbarbutton anonid="navigationnext" image="{IconsBase}/small/shadow/navigate_right.png" tooltiptext="&amp;modules.uixul.bo.general.Navigate-next;" oncommand="navigateNext()" />
						<toolbarbutton anonid="navigationnext2" image="{IconsBase}/small/shadow/navigate_right2.png" tooltiptext="&amp;modules.uixul.bo.general.Navigate-next-quick;" oncommand="navigateNext(true)" />
						<toolbarbutton anonid="navigationend" image="{IconsBase}/small/shadow/navigate_end.png" tooltiptext="&amp;modules.uixul.bo.general.Navigate-end;" oncommand="navigateEnd()" />
						<spacer flex="1" />
					</toolbar>

					<!-- tree filter entry : -->

					<toolbar anonid="filtertb" flex="1" class="change-toolbar">

					    <spacer flex="1" />

						<hbox align="center">

    						<menulist class="tree-filter" sizetopopup="none" anonid="filtertext" editable="true" width="200" oncommand="filterSelect()" oninput="filterInput()">
                              <menupopup>
                                <menuitem label=""/>
                                <menuitem label="key:"/>
                                <menuitem label="val:"/>
                              </menupopup>
                            </menulist>
                        </hbox>

					</toolbar>

			    </toolbox>

			    <tree anonid="tree" hidecolumnpicker="true" selstyle="primary" flex="1" xbl:inherits="disabled,collapsed,hidden,style,seltype,selstyle,hidecolumnpicker,class,ref,hideheader" editable="true">

					<treecols anonid="treecols">

					   <treecol type="checkbox" anonid="check-column" label="&amp;modules.uixul.bo.general.Selector;" hidden="true" xbl:inherits="hideheader" class="treecol-image" src="{IconsBase}/small/checkbox_empty.png" editable="true" tooltiptext="&amp;modules.uixul.bo.general.Selector-tooltip;" style="padding-right: 5px;"/>

					   <treecol anonid="id-column" label="&amp;modules.uixul.bo.general.Id;" hidden="true" xbl:inherits="hideheader" tooltiptext="&amp;modules.uixul.bo.general.Id-tooltip;" class="treecol-image" src="{IconsBase}/small/key2.png" style="padding-right: 5px;" width="70px"/>

					   <treecol anonid="pub-column" label="&amp;modules.uixul.bo.general.Publicated;" hidden="true" xbl:inherits="hideheader" class="treecol-image" src="{IconsBase}/small/eyeglasses.png" tooltiptext="&amp;modules.uixul.bo.general.Publicated-tooltip;" style="padding-right: 5px;"/>

					   <treecol flex="3" anonid="main-column" primary="true" xbl:inherits="hideheader"/>

					</treecols>

					<treechildren anonid="treechildren" />

				</tree>

			</vbox>

		</xbl:content>


		<handlers>


			<handler event="keypress" keycode="VK_F2" phase="capturing" preventdefault="true"><![CDATA[
				event.stopPropagation();
			]]></handler>


			<handler event="keypress" keycode="VK_F1" phase="capturing" preventdefault="true"><![CDATA[
				event.stopPropagation();
			]]></handler>


		</handlers>


	</binding>


</bindings>
